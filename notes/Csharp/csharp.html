<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>C# 知识大全</title>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        color: #333;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      h1,
      h2,
      h3 {
        color: #2c3e50;
      }

      h1 {
        border-bottom: 2px solid #3498db;
        padding-bottom: 10px;
      }

      h2 {
        background-color: #f8f9fa;
        padding: 8px 12px;
        border-left: 4px solid #3498db;
      }

      code {
        background-color: #f4f4f4;
        padding: 2px 4px;
        border-radius: 3px;
        font-family: "Consolas", "Courier New", monospace;
      }

      pre {
        background-color: #f8f9fa;
        padding: 15px;
        border-radius: 5px;
        overflow-x: auto;
      }

      .note {
        background-color: #e7f5fe;
        border-left: 4px solid #3498db;
        padding: 10px 15px;
        margin: 15px 0;
      }
      .home-link {
        display: inline-block;
        margin: 20px 0;
        padding: 8px 15px;
        background-color: #3498db;
        color: white;
        text-decoration: none;
        border-radius: 4px;
        transition: background-color 0.3s;
      }

      .home-link:hover {
        background-color: #2874a6;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>C# 编程语言知识大全</h1>
      <p>本页面包含从基础到高级的C#知识体系</p>
      <a href="/index.html" class="home-link">返回主页</a>
    </header>

    <nav>
      <h2>目录</h2>
      <ul>
        <li><a href="#basics">基础语法</a></li>
        <li><a href="#oop">面向对象编程</a></li>
        <li><a href="#advanced">高级特性</a></li>
        <li><a href="#memory">内存管理</a></li>
        <li><a href="#latest">最新特性</a></li>
        <li><a href="#best-practices">最佳实践</a></li>
      </ul>
    </nav>

    <main>
      <article id="basics">
        <h2>1. C#基础语法</h2>

        <section>
          <h3>1.1 数据类型</h3>
          <div class="note">
            C#是强类型语言，所有变量都需指定类型或使用var推断
          </div>

          <pre><code>// 值类型
int number = 10;
double price = 9.99;
char letter = 'A';
bool isTrue = false;

// 引用类型
string name = "Alice";
object obj = new Person();
dynamic dyn = new ExpandoObject();</code></pre>
        </section>

        <section>
          <h3>1.2 控制流</h3>
          <pre><code>// if-else
if (age &lt; 18)
{
    Console.WriteLine("Adult");
}
else
{
    Console.WriteLine("Minor");
}

// switch表达式(C# 8+)
string result = day switch
{
    "Monday" =&lt; "Start of work week",
    "Friday" =&lt; "Almost weekend",
    _ =&lt; "Regular day"
};</code></pre>
        </section>
      </article>

      <article id="oop">
        <h2>2. 面向对象编程</h2>

        <section>
          <h3>2.1 类与对象</h3>
          <pre><code>public class Person
{
    // 字段
    private string name;
    
    // 属性
    public string Name
    {
        get =&lt; name;
        set =&lt; name = value ?? throw new ArgumentNullException(nameof(value));
    }
    
    // 自动属性
    public int Age { get; set; }
    
    // 方法
    public void Greet() =&lt; Console.WriteLine($"Hello, {Name}");
}</code></pre>
        </section>

        <section>
          <h3>2.2 继承与多态</h3>
          <pre><code>public abstract class Animal
{
    public abstract void MakeSound();
}

public class Dog : Animal
{
    public override void MakeSound() =&lt; Console.WriteLine("Woof!");
}</code></pre>
        </section>
      </article>

      <article id="advanced">
        <h2>3. 高级特性</h2>

        <section>
          <h3>3.1 泛型</h3>
          <pre><code>public class Repository&lt;T&gt; where T : class
{
    private List&lt;T&gt; items = new List&lt;T&gt;();
    
    public void Add(T item) =&lt; items.Add(item);
    
    public T Find(Predicate&lt;T&gt; match) =&lt; items.Find(match);
}</code></pre>
        </section>

        <section>
          <h3>3.2 异步编程</h3>
          <pre><code>public async Task&lt;string&gt; FetchDataAsync(string url)
{
    using HttpClient client = new HttpClient();
    return await client.GetStringAsync(url);
}</code></pre>
        </section>
      </article>

      <article id="memory">
        <h2>4. 内存管理与性能</h2>

        <section>
          <h3>4.1 垃圾回收</h3>
          <div class="note">
            C#使用分代垃圾回收器(Gen 0, Gen 1, Gen 2)自动管理内存
          </div>

          <pre><code>// 使用IDisposable释放非托管资源
public class ResourceHolder : IDisposable
{
    private bool disposed = false;
    
    protected virtual void Dispose(bool disposing)
    {
        if (!disposed)
        {
            if (disposing)
            {
                // 释放托管资源
            }
            // 释放非托管资源
            disposed = true;
        }
    }
    
    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }
}</code></pre>
        </section>
      </article>

      <article id="latest">
        <h2>5. 最新特性(C# 10/11)</h2>

        <section>
          <h3>5.1 记录类型</h3>
          <pre><code>// 记录类
public record Person(string Name, int Age);

// 记录结构
public readonly record struct Point(int X, int Y);

// 使用
var person = new Person("Alice", 30);
var samePerson = person with { Age = 31 }; // 非破坏性修改</code></pre>
        </section>

        <section>
          <h3>5.2 原始字符串字面量(C# 11)</h3>
          <pre><code>string json = """
    {
        "name": "Alice",
        "age": 30,
        "interests": ["coding", "reading"]
    }
    """;</code></pre>
        </section>
      </article>

      <article id="best-practices">
        <h2>6. 最佳实践</h2>

        <section>
          <h3>6.1 异常处理</h3>
          <pre><code>try
{
    // 可能抛出异常的代码
}
catch (SpecificException ex) when (ex.ErrorCode == 404)
{
    // 特定条件处理
}
catch (Exception ex)
{
    // 一般处理
    throw new CustomException("Wrapped exception", ex);
}
finally
{
    // 清理资源
}</code></pre>
        </section>

        <section>
          <h3>6.2 依赖注入</h3>
          <pre><code>public interface IService { void DoWork(); }

public class Service : IService { public void DoWork() =&lt; Console.WriteLine("Working"); }

public class Client
{
    private readonly IService _service;
    
    public Client(IService service) =&lt; _service = service;
    
    public void Execute() =&lt; _service.DoWork();
}</code></pre>
        </section>
      </article>
    </main>

    <footer>
      <p>最后更新: <time datetime="2023-11-15">2025年5月30日</time></p>
      <p>© C#学习笔记</p>
    </footer>
  </body>
</html>
